<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  
  <!-- å¾®ä¿¡ / æŠ–éŸ³åˆ†äº«å…³é”® Meta - æ³¨æ„ï¼šog:urlæ›¿æ¢ä¸ºå®é™…éƒ¨ç½²åœ°å€ï¼Œog:imageæ›¿æ¢ä¸ºè‡ªæœ‰å›¾ç‰‡åœ°å€ -->
  <title>æŠŠçˆ±å¸¦å›å®¶ | ä¸“å±ç¥ç¦</title>
  <meta name="description" content="è¿™æ˜¯æˆ‘é€ä½ çš„ç¥ç¦ï¼Œæ„¿æ¸©æš–å¸¸ä¼´ï¼Œå¹¸ç¦å®‰åº·ï¼ç‚¹å‡»æ‰“å¼€ä¸“å±è´ºå¡ >>" />
  <meta property="og:title" content="æŠŠçˆ±å¸¦å›å®¶ | ä¸“å±ç¥ç¦" />
  <meta property="og:description" content="è¿™æ˜¯æˆ‘é€ä½ çš„ç¥ç¦ï¼Œæ„¿æ¸©æš–å¸¸ä¼´ï¼Œå¹¸ç¦å®‰åº·ï¼ç‚¹å‡»æ‰“å¼€ä¸“å±è´ºå¡ >>" />
  <meta property="og:image" content="https://img.alicdn.com/imgextra/i4/O1CN01ZvJhUH1XqQmYdFzKj_!!6000000002885-2-tps-1080-1920.png" />
  <meta property="og:url" content="https://yourdomain.com/love-home.html" />
  <meta property="og:type" content="website" />

  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      background: linear-gradient(135deg, #ff7e5f, #feb47b);
      font-family: "åæ–‡è¡Œæ¥·", "STXingkai", "KaiTi", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "SimHei", cursive, sans-serif;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 10px;
      overflow-x: hidden;
      position: relative;
      color: white;
    }

    /* é£˜è½åŠ¨ç”»å®¹å™¨ - ä¼˜åŒ–å±‚å ä¸Šä¸‹æ–‡ */
    #snow-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1;
      overflow: hidden;
    }
    .snow {
      position: absolute;
      color: #ffd700;
      font-size: 24px;
      opacity: 0.8;
      text-shadow: 0 0 8px rgba(255,215,0,0.6);
      animation: fall linear forwards;
    }

    @keyframes fall {
      to { transform: translateY(100%) rotate(360deg); }
    }

    .container {
      max-width: 600px;
      width: 100%;
      z-index: 2;
    }

    /* è¡¨å•åŒº - å“åº”å¼å†…è¾¹è·ï¼Œé€‚é…å°å± */
    .form-area {
      background: rgba(255, 255, 255, 0.92);
      padding: clamp(15px, 5vw, 25px);
      border-radius: 20px;
      box-shadow: 0 8px 25px rgba(192, 57, 43, 0.4);
      margin-bottom: 25px;
      backdrop-filter: blur(5px);
    }
    .form-area h2 {
      text-align: center;
      color: #c0392b;
      margin-bottom: 20px;
      font-size: clamp(24px, 6vw, 28px);
      text-shadow: 0 1px 2px rgba(0,0,0,0.1);
    }
    textarea, input {
      width: 100%;
      padding: clamp(10px, 3vw, 14px);
      margin: 12px 0;
      border: 2px solid #e74c3c;
      border-radius: 12px;
      font-size: clamp(16px, 4vw, 18px);
      font-family: inherit;
      outline: none;
      resize: none;
    }
    button {
      width: 100%;
      padding: clamp(12px, 4vw, 16px);
      background: linear-gradient(135deg, #e74c3c, #c0392b);
      color: white;
      border: none;
      border-radius: 14px;
      font-size: clamp(18px, 5vw, 20px);
      font-weight: bold;
      cursor: pointer;
      margin-top: 10px;
      box-shadow: 0 4px 15px rgba(231, 76, 60, 0.4);
      transition: all 0.3s ease;
    }
    button:hover { transform: scale(1.02); }
    button:active { transform: scale(0.98); }

    /* è´ºå¡å±•ç¤ºåŒº - ç§»é™¤ç°ç™½è‰²èƒŒæ™¯ï¼Œé€‚é…æ–°èƒŒæ™¯å›¾ */
    .card-view {
      display: none;
      width: 100%;
      border-radius: 20px;
      overflow: hidden;
      box-shadow: 0 10px 30px rgba(192, 57, 43, 0.35);
      position: relative;
      aspect-ratio: 9 / 16;
      max-height: 85vh;
      animation: fadeIn 0.8s ease-out;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.95); }
      to { opacity: 1; transform: scale(1); }
    }
    /* è´ºå¡èƒŒæ™¯ - æ›¿æ¢ä¸ºAIç¥ç¦å›¾ï¼Œä¼˜åŒ–è¦†ç›–å’Œæ˜¾ç¤ºæ•ˆæœ */
    .card-bg {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      /* æ›¿æ¢ä¸ºä½ çš„AIç”Ÿæˆç¥ç¦å›¾åœ°å€ï¼Œå»ºè®®å°ºå¯¸1080*1920ï¼Œé€‚é…ç§»åŠ¨ç«¯ */
      background-image: url('https://i.imgur.com/KMCyiBY.png');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      opacity: 0.95;
    }
    .card-content {
      position: relative;
      z-index: 2;
      padding: clamp(20px, 8vw, 30px);
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      color: #fff;
      text-shadow: 0 2px 8px rgba(0,0,0,0.6);
    }
    /* æ ¸å¿ƒä¼˜åŒ–ï¼šæŠŠçˆ±å¸¦å›å®¶ æ ‡é¢˜è‰ºæœ¯ç¾åŒ– */
    .card-title {
      font-size: clamp(32px, 12vw, 48px);
      margin-bottom: 30px;
      letter-spacing: 8px;
      animation: pulse 2s infinite, shine 3s ease-in-out infinite alternate;
      white-space: nowrap;
      overflow: hidden;
      font-weight: bold;
      /* æ¸å˜æ–‡å­—+æè¾¹ï¼Œå¢å¼ºè‰ºæœ¯æ„Ÿ */
      background: linear-gradient(135deg, #ffd700, #ff9a76, #ff6b6b);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      -webkit-text-stroke: 1px rgba(255,255,255,0.8);
    }
    /* æ ‡é¢˜è„‰å†²åŠ¨ç”»ï¼ˆä¿ç•™ï¼‰+ æ–°å¢å…‰æ³½åŠ¨ç”» */
    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }
    @keyframes shine {
      from { filter: drop-shadow(0 0 10px rgba(255,215,0,0.4)); }
      to { filter: drop-shadow(0 0 20px rgba(255,154,118,0.8)); }
    }
    /* ç¥ç¦æ–‡å­—å®¹å™¨ - å¼€å¯ç›¸å¯¹å®šä½ï¼Œé…åˆé€å­—åŠ¨ç”» */
    .card-message {
      font-size: clamp(18px, 5vw, 24px);
      line-height: 2;
      margin-bottom: 25px;
      background: rgba(0,0,0,0.25);
      padding: clamp(15px, 5vw, 20px);
      border-radius: 16px;
      width: 100%;
      backdrop-filter: blur(8px);
      max-height: 40%;
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
      /* éšè—æœªåŠ¨ç”»çš„æ–‡å­— */
      overflow: hidden;
      min-height: 120px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    /* é€å­—æ¸ç°åŠ¨ç”»æ ¸å¿ƒæ ·å¼ */
    .char-animate {
      opacity: 0;
      transform: translateY(10px);
      animation: charFadeIn 0.5s ease forwards;
      display: inline-block;
    }
    /* å•å­—æ¸ç°åŠ¨ç”» */
    @keyframes charFadeIn {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    .card-sender {
      font-size: clamp(18px, 4.5vw, 22px);
      margin-top: auto;
      animation: fadeIn 1.5s ease-out;
      padding: 10px 20px;
      background: rgba(255,107,107,0.2);
      border-radius: 12px;
      backdrop-filter: blur(5px);
    }

    /* åˆ†äº«æç¤ºæ ·å¼ */
    .share-tip {
      margin-top: 20px;
      text-align: center;
      color: #c0392b;
      font-weight: bold;
      background: rgba(255,248,240,0.9);
      padding: clamp(10px, 3vw, 14px);
      border-radius: 12px;
      font-size: clamp(14px, 3vw, 16px);
      z-index: 2;
      width: 100%;
      max-width: 600px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      border-left: 4px solid #e74c3c;
    }

    /* åŠ è½½æç¤º */
    #loading {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.7);
      color: white;
      font-size: clamp(18px, 4vw, 20px);
      align-items: center;
      justify-content: center;
      z-index: 1000;
      transition: all 0.3s ease;
      flex-direction: column;
    }
    #loading::after {
      content: '';
      width: 20px;
      height: 20px;
      border: 3px solid #fff;
      border-top: 3px solid transparent;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-top: 15px;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <div id="snow-container"></div>

  <div class="container">
    <div id="formSection" class="form-area">
      <h2>âœ¨ å†™ä¸‹ä½ çš„ç¥ç¦</h2>
      <textarea id="message" placeholder="å†™ä¸‹ä½ æƒ³è¯´çš„è¯...ï¼ˆæœ€å¤š50å­—ï¼Œä¾‹å¦‚ï¼šæ„¿ä½ å¹³å®‰å–œä¹ï¼Œä¸‡äº‹é¡ºé‚ï¼ï¼‰" rows="3"></textarea>
      <input type="text" id="name" placeholder="ä½ çš„åå­—ï¼ˆæœ€å¤š8å­—ï¼‰" />
      <button id="createCardBtn">ğŸ ç”Ÿæˆæˆ‘çš„ç¥ç¦å¡</button>
    </div>

    <div id="cardSection" class="card-view">
      <div class="card-bg"></div>
      <div class="card-content">
        <div class="card-title">æŠŠçˆ±å¸¦å›å®¶</div>
        <div class="card-message" id="displayMessage">æ„¿ä½ è¢«ä¸–ç•Œæ¸©æŸ”ä»¥å¾…ï¼Œå¹¸ç¦å¸¸ä¼´ã€‚</div>
        <div class="card-sender" id="displayName">â€”â€” æ¥è‡ªï¼šæœ‹å‹</div>
      </div>
    </div>

    <div id="shareTip" class="share-tip" style="display:none;">
      ğŸ“¤ é•¿æŒ‰ä¿å­˜è´ºå¡å›¾ç‰‡ï¼Œè½¬å‘ç»™å¥½å‹<br/>
      ç‚¹å‡»å³ä¸Šè§’ã€ŒÂ·Â·Â·ã€åˆ†äº«åˆ°æœ‹å‹åœˆ/æŠ–éŸ³ï¼Œä¼ é€’æ¸©æš–ï¼
    </div>
  </div>

  <div id="loading">ç”Ÿæˆä¸­ï¼Œè¯·ç¨å€™</div>

  <script>
    // æŠ½ç¦»é­”æ³•å€¼ä¸ºå¸¸é‡ï¼Œä¾¿äºç»´æŠ¤
    const CONSTANTS = {
      SNOW_INTERVAL: 600,
      SNOW_DURATION: 10000,
      LOADING_DELAY: 800, // å»¶é•¿åŠ è½½æ—¶é—´ï¼ŒåŒ¹é…åŠ¨ç”»èŠ‚å¥
      MAX_MSG_LENGTH: 50,
      MAX_NAME_LENGTH: 8,
      SNOW_SYMBOLS: ['â¤ï¸', 'âœ¨', 'ğŸ•Šï¸', 'ğŸŒ¸', 'ğŸ’«', 'ğŸ’Œ', 'ğŸŒŸ'],
      DEFAULT_MSG: 'æ„¿ä½ è¢«ä¸–ç•Œæ¸©æŸ”ä»¥å¾…ï¼Œå¹¸ç¦å¸¸ä¼´ã€‚',
      DEFAULT_NAME: 'æœ‹å‹',
      CHAR_DELAY: 80 // é€å­—åŠ¨ç”»é—´éš”(ms)ï¼Œæ•°å€¼è¶Šå°è¶Šå¿«
    };

    let snowTimer = null;

    // é£˜è½åŠ¨ç”»
    function createSnow() {
      const container = document.getElementById('snow-container');
      const maxSnowCount = 20;

      snowTimer = setInterval(() => {
        if (container.children.length >= maxSnowCount) return;

        const snow = document.createElement('div');
        snow.classList.add('snow');
        snow.innerText = CONSTANTS.SNOW_SYMBOLS[Math.floor(Math.random() * CONSTANTS.SNOW_SYMBOLS.length)];
        snow.style.left = `${Math.random() * 100}vw`;
        snow.style.opacity = `${Math.random() * 0.5 + 0.5}`;
        snow.style.fontSize = `${Math.random() * 20 + 16}px`;
        snow.style.animationDuration = `${Math.random() * 5 + 5}s`;
        snow.style.transform = `rotate(${Math.random() * 360}deg)`;
        container.appendChild(snow);

        setTimeout(() => snow.remove(), CONSTANTS.SNOW_DURATION);
      }, CONSTANTS.SNOW_INTERVAL);
    }

    // æ ¸å¿ƒæ–°å¢ï¼šç¥ç¦æ–‡å­—é€å­—æ¸ç°åŠ¨ç”»å‡½æ•°
    function initTextAnimate(text, container) {
      // æ¸…ç©ºå®¹å™¨åŸæœ‰å†…å®¹
      container.innerHTML = '';
      // å°†æ–‡å­—æ‹†åˆ†ä¸ºå•ä¸ªå­—ç¬¦
      const chars = text.split('');
      // éå†æ¯ä¸ªå­—ç¬¦ï¼Œåˆ›å»ºå¸¦åŠ¨ç”»çš„å…ƒç´ 
      chars.forEach((char, index) => {
        const span = document.createElement('span');
        span.className = 'char-animate';
        span.innerText = char;
        // ä¸ºæ¯ä¸ªå­—ç¬¦è®¾ç½®å»¶è¿Ÿï¼Œå®ç°é€å­—å‡ºç°
        span.style.animationDelay = `${index * CONSTANTS.CHAR_DELAY}ms`;
        container.appendChild(span);
      });
    }

    // ç”Ÿæˆè´ºå¡æ ¸å¿ƒå‡½æ•°ï¼ˆä¼˜åŒ–ï¼Œé›†æˆæ–‡å­—åŠ¨ç”»ï¼‰
    function createCard() {
      const msgInput = document.getElementById('message');
      const nameInput = document.getElementById('name');
      const msg = msgInput.value.trim();
      const name = nameInput.value.trim();
      const messageContainer = document.getElementById('displayMessage');
      
      // éç©ºå’Œé•¿åº¦æ ¡éªŒ
      if (!msg) {
        alert('è¯·å†™ä¸‹ä½ çš„ç¥ç¦è¯è¯­ï½');
        msgInput.focus();
        return;
      }
      if (!name) {
        alert('è¯·å¡«å†™ä½ çš„åå­—ï½');
        nameInput.focus();
        return;
      }
      if (msg.length > CONSTANTS.MAX_MSG_LENGTH) {
        alert(`ç¥ç¦è¯­æœ€å¤š${CONSTANTS.MAX_MSG_LENGTH}å­—å“¦ï¼Œç²¾ç®€ä¸€ç‚¹æ›´æ¸©é¦¨ï½`);
        msgInput.focus();
        return;
      }
      if (name.length > CONSTANTS.MAX_NAME_LENGTH) {
        alert(`åå­—æœ€å¤š${CONSTANTS.MAX_NAME_LENGTH}å­—ï½`);
        nameInput.focus();
        return;
      }

      // æ˜¾ç¤ºåŠ è½½å¼¹çª—
      const loading = document.getElementById('loading');
      loading.style.display = 'flex';

      // æ¨¡æ‹ŸåŠ è½½è¿‡ç¨‹ï¼ˆå»¶é•¿è‡³800msï¼ŒåŒ¹é…åŠ¨ç”»ä½“éªŒï¼‰
      setTimeout(() => {
        // æ¸²æŸ“å‘é€è€…åå­—
        document.getElementById('displayName').innerText = `â€”â€” æ¥è‡ªï¼š${name}`;
        // åˆå§‹åŒ–ç¥ç¦æ–‡å­—é€å­—åŠ¨ç”»
        initTextAnimate(msg, messageContainer);

        // åˆ‡æ¢æ˜¾ç¤ºåŒºåŸŸ
        document.getElementById('formSection').style.display = 'none';
        document.getElementById('cardSection').style.display = 'block';
        document.getElementById('shareTip').style.display = 'block';

        // æ›´æ–°URLå‚æ•°
        const newUrl = `${window.location.origin}${window.location.pathname}?msg=${encodeURIComponent(msg)}&name=${encodeURIComponent(name)}`;
        window.history.replaceState({}, '', newUrl);

        // éšè—åŠ è½½å¼¹çª—
        loading.style.display = 'none';
      }, CONSTANTS.LOADING_DELAY);
    }

    // é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œ
    window.onload = () => {
      createSnow();
      // ç»‘å®šç”ŸæˆæŒ‰é’®ç‚¹å‡»äº‹ä»¶
      document.getElementById('createCardBtn').addEventListener('click', createCard);
      // å›è½¦æäº¤
      document.getElementById('name').addEventListener('keydown', (e) => {
        if (e.key === 'Enter') createCard();
      });

      // è§£æURLå‚æ•°ï¼Œåˆ†äº«è´ºå¡æ—¶ä¹Ÿè§¦å‘æ–‡å­—åŠ¨ç”»
      const urlParams = new URLSearchParams(window.location.search);
      const msg = urlParams.get('msg');
      const name = urlParams.get('name');
      const messageContainer = document.getElementById('displayMessage');
      if (msg && name) {
        try {
          const decodeMsg = decodeURIComponent(msg);
          const decodeName = decodeURIComponent(name);
          // åˆ†äº«é“¾æ¥æ‰“å¼€æ—¶ï¼Œåˆå§‹åŒ–æ–‡å­—åŠ¨ç”»
          initTextAnimate(decodeMsg, messageContainer);
          document.getElementById('displayName').innerText = `â€”â€” æ¥è‡ªï¼š${decodeName}`;
          document.getElementById('formSection').style.display = 'none';
          document.getElementById('cardSection').style.display = 'block';
          document.getElementById('shareTip').style.display = 'block';
        } catch (e) {
          console.error('URLå‚æ•°è§£æå¤±è´¥ï¼š', e);
          // è§£æå¤±è´¥æ—¶æ˜¾ç¤ºé»˜è®¤å†…å®¹å¹¶è§¦å‘åŠ¨ç”»
          initTextAnimate(CONSTANTS.DEFAULT_MSG, messageContainer);
        }
      } else {
        // é¦–æ¬¡æ‰“å¼€é¡µé¢ï¼Œé»˜è®¤æ–‡å­—ä¹Ÿè§¦å‘åŠ¨ç”»
        initTextAnimate(CONSTANTS.DEFAULT_MSG, messageContainer);
      }
    };

    // é¡µé¢å¸è½½é”€æ¯å®šæ—¶å™¨
    window.onunload = () => {
      if (snowTimer) clearInterval(snowTimer);
    };
  </script>
</body>
</html>